:root{
  --board-bg: #f5d28c;
  --grid: #9a6b2f;
  --sel: #4f46e5;
  --move: #10b981;
  --capture: #ef4444;
  --sente: #111827;
  --gote: #b91c1c;
}
* { box-sizing: border-box; }
body { margin:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Sans", Arial, sans-serif; }
.toolbar{
  display:flex;justify-content:space-between;align-items:center;gap:.75rem;
  padding:.6rem .9rem;border-bottom:1px solid #e5e7eb;background:#fff;
  position:sticky;top:0;z-index:2;
}
.chk{ margin-left:.6rem; font-size:.9rem; }
.wrap{ display:flex; gap:1rem; padding:1rem; align-items:flex-start; }
.board{
  position:relative;
  width:min(90vmin,640px);
  aspect-ratio:1/1;
  background:var(--board-bg);
  border:6px solid var(--grid);
  border-radius:8px;
  box-shadow: 0 2px 10px rgba(0,0,0,.08);
  display:grid;
  grid-template-columns: repeat(9, 1fr);
  grid-template-rows: repeat(9, 1fr);
}
.cell{
  position:relative;border:1px solid rgba(0,0,0,.2);
  display:flex;align-items:center;justify-content:center;
  user-select:none; cursor:pointer;
}
.coord{
  position:absolute; font-size:.65rem; color:rgba(0,0,0,.45);
}
.coord.x{ right:2px; bottom:2px; }
.coord.y{ left:2px; top:2px; }
.piece{
  width:84%; height:84%;
  border-radius:10%/16%;
  display:flex; align-items:center; justify-content:center;
  font-weight:700; letter-spacing:.05em;
  background:#fff7ed; border:2px solid #c2410c;
  transform-origin:center center;
}
.piece.sente{ color:var(--sente); }
.piece.gote{ color:var(--gote); transform: rotate(180deg); }
.piece.promoted{
  background:#fef3c7; border-color:#b45309;
}
.cell.selected { outline:3px solid var(--sel); outline-offset:-3px; }
.cell.move { box-shadow: inset 0 0 0 4px rgba(16,185,129,.35); }
.cell.capture { box-shadow: inset 0 0 0 4px rgba(239,68,68,.35); }

.panel{
  min-width:260px; max-width:360px;
  border:1px solid #e5e7eb; border-radius:8px; padding:1rem; background:#fff;
}
.panel h3{ margin:.2rem 0 .6rem; }
.legend{ display:flex; gap:1rem; align-items:center; margin-top:.6rem; }
.legend .piece{ width:1.8rem; height:1.8rem; font-size:.9rem; }
