# Enhanced GeoGebra-style Math Input System

**risou.md準拠の拡張数学入力システム**

## 概要
このシステムは、GeoGebra互換の数学記法をサポートし、複数の入力方式を提供する包括的な数学入力インターフェースです。

## 入力方式

### A1: 選択式入力
- **対象**: 標準的な数学問題タイプ
- **機能**: 
  - 二次方程式 (ax² + bx + c = 0)
  - 連立方程式 (2元1次)
  - 三角関数 (A sin(Bx + C) + D)
  - 指数・対数関数
  - 微分・積分
- **特徴**: パラメータ入力でカスタマイズ可能

### F1: テンプレート入力
- **対象**: 分野別の効率的入力
- **分野**: 
  - 📐 基本数学: 一次・二次・三次関数、分数、平方根
  - 🔢 代数: 因数分解、展開、連立方程式、不等式
  - 📈 微積分: 微分、偏微分、積分、極限、級数
  - 📊 線形代数: 行列、行列式、ベクトル、内積・外積
  - 📏 幾何: 距離、円・直線の方程式、面積計算
- **特徴**: 変数の自動抽出と動的フィールド生成

### F2: 自由入力
- **対象**: GeoGebra互換記法による直接入力
- **機能**:
  - リアルタイム入力補完 (Tab キーで適用)
  - 構文ハイライト
  - エラー検証
  - 数値評価 (Ctrl+Enter)
- **記法例**:
  ```
  x^2 + 2*x + 1           # 二次式
  frac{a+b}{c-d}          # 分数
  sqrt{x^2+y^2}           # 平方根
  sin(x) + cos(x)         # 三角関数
  integrate(x^2, x)       # 積分
  matrix[[1,2],[3,4]]     # 行列
  ```

## 対応数学領域

✅ **1A2B3C基本数学**
- 多項式、分数、根号
- 三角関数、指数・対数

✅ **微積分**
- 導関数、偏微分、積分（定・不定）
- 極限、級数（Σ記法）

✅ **線形代数**
- 行列演算、行列式
- ベクトル、内積・外積

✅ **代数系**
- 因数分解、連立方程式
- 不等式、絶対値

## 技術仕様

### レンダリング
- **MathJax 3.x**: LaTeX数式のリアルタイムレンダリング
- **レスポンシブ対応**: PC・モバイル・タブレット
- **アクセシビリティ**: スクリーンリーダー対応、キーボード操作

### モバイル対応
- **仮想キーボード**: 4パネル構成
  - 123: 数字・基本演算
  - 関数: sin, cos, tan, log, sqrt等
  - 記号: α, β, γ, θ, ≤, ≥, ∞等
  - 高度: 積分、総和、極限、偏微分

### 出力形式
- **LaTeX**: 数式組版用
- **GeoGebra**: GeoGebra互換記法
- **数値評価**: 安全な数値計算
- **構文検証**: エラーチェック機能

## ファイル構成

```
example/ans/
├── math-input.html     # メインUI (拡張システム)
├── math-input.js       # JavaScript制御ロジック
├── math-input.css      # レスポンシブスタイル
├── index.html          # 既存の分数入力システム
├── answer-ui.js        # 既存のUI制御
└── README.md           # このファイル
```

## 使用方法

1. **ブラウザでmath-input.htmlを開く**
2. **入力方式を選択**:
   - A1: 問題タイプから選択してパラメータ入力
   - F1: 分野を選んでテンプレート使用
   - F2: GeoGebra記法で直接入力
3. **数式を入力・編集**
4. **「評価・変換」ボタンでLaTeX変換・数値計算**

## 互換性

### 既存システムとの関係
- **answer-ui.js**: 分数特化の軽量システム (A1, A2, A3, F1, F2モード)
- **math-input.js**: GeoGebra風拡張システム (risou.md完全対応)
- 両システムは独立して動作可能

### ブラウザ対応
- Chrome/Edge 90+
- Firefox 88+
- Safari 14+
- モバイルブラウザ対応

## 開発・拡張

### カスタマイズポイント
- `mathDefinitions.choiceTypes`: A1選択肢の追加
- `mathDefinitions.templates`: F1テンプレートの追加
- `suggestions`: F2入力補完の拡張
- CSS変数: テーマカラーの変更

### 今後の拡張予定
- 🔄 数式グラフ表示機能
- 🔄 数式解法ステップ表示
- 🔄 複数言語対応
- 🔄 数式履歴・保存機能

## ライセンス
MITライセンス準拠

---

**Contact**: このシステムは risou.md の要件に基づいて設計されています。