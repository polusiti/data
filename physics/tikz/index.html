<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⚡ Physics TikZ Creator v1.0 | Data Manager</title>
    <meta name="description" content="物理図制作に特化したTikZ Creator。力学、電磁気学、熱力学、波動の図形作成">
    <meta name="keywords" content="TikZ,物理,Physics,図形作成,教育,JSXGraph">

    <!-- Open Graph -->
    <meta property="og:title" content="Physics TikZ Creator v1.0">
    <meta property="og:description" content="物理教育現場での図形教材作成に特化した実用的なツール">
    <meta property="og:url" content="https://data.allfrom0.top/physics/tikz/">
    <meta property="og:type" content="website">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://data.allfrom0.top/physics/tikz/">

    <!-- JSXGraph for mathematical plotting -->
    <link rel="stylesheet" href="https://jsxgraph.uni-bayreuth.de/distrib/jsxgraph.css">
    <script src="https://jsxgraph.uni-bayreuth.de/distrib/jsxgraphcore.js"></script>

    <!-- CodeMirror for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/material-darker.min.css">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        /* ... (existing styles remain the same) ... */
    </style>
</head>
<body>
    <div class="container">
        <!-- ... (existing header and breadcrumb) ... -->

        <div class="main-grid">
            <!-- ... (existing input and preview panels) ... -->
        </div>

        <!-- ツールパネル -->
        <div class="panel tools-panel">
            <div class="panel-header"><i class="fas fa-tools"></i> 物理図制作ツール</div>
            <div class="panel-content">
                <!-- ... (existing mode buttons) ... -->

                <!-- エディタ制御 -->
                <div class="section-title"><i class="fas fa-code"></i> エディタ制御</div>
                <div class="editor-controls" style="display: flex; gap: 12px; margin-bottom: 16px; flex-wrap: wrap;">
                    <button class="mode-btn" id="clearCode" style="font-size: 12px; padding: 6px 12px; background: #ef4444; color: white; border-color: #ef4444;"><i class="fas fa-trash"></i> コードクリア</button>
                    <button class="mode-btn" id="exportPNG" style="font-size: 12px; padding: 6px 12px; background: #10b981; color: white; border-color: #10b981;"><i class="fas fa-camera"></i> PNG出力</button>
                    <button class="mode-btn" id="exportSVG" style="font-size: 12px; padding: 6px 12px; background: #f59e0b; color: white; border-color: #f59e0b;"><i class="fas fa-image"></i> SVG出力</button>
                    <button class="mode-btn" id="saveTemplateBtn" style="font-size: 12px; padding: 6px 12px; background: #3b82f6; color: white; border-color: #3b82f6;"><i class="fas fa-save"></i> テンプレート保存</button>
                </div>

                <!-- ... (existing toolbar) ... -->

                <!-- サンプル -->
                <div class="samples">
                    <div class="section-title"><i class="fas fa-file-alt"></i> 物理テンプレート</div>
                    <div class="sample-grid" id="sampleGrid">
                        <!-- Templates will be loaded here dynamically -->
                    </div>
                </div>

                <!-- ... (existing info and debug panels) ... -->
            </div>
        </div>
    </div>

    <!-- Save Template Modal -->
    <div class="modal fade" id="saveTemplateModal" tabindex="-1" aria-labelledby="saveTemplateModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="saveTemplateModalLabel">テンプレートを保存</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="saveTemplateForm">
                        <div class="mb-3">
                            <label for="templateName" class="form-label">テンプレート名</label>
                            <input type="text" class="form-control" id="templateName" required>
                        </div>
                        <div class="mb-3">
                            <label for="templateDescription" class="form-label">説明（任意）</label>
                            <textarea class="form-control" id="templateDescription" rows="2"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="templateCategory" class="form-label">カテゴリ</label>
                            <select class="form-select" id="templateCategory">
                                <option value="mechanics">力学</option>
                                <option value="electromagnetism">電磁気</option>
                                <option value="thermodynamics">熱力学</option>
                                <option value="waves">波動</option>
                                <option value="modern">現代物理</option>
                                <option value="general">一般</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                    <button type="button" class="btn btn-primary" id="confirmSaveTemplate">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- CodeMirror JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/stex/stex.min.js"></script>

    <script src="tikz-creator.js"></script>
</body>
</html>