# 英語語彙練習システム (Vocabulary Practice)

R2ストレージから語彙問題データを取得して語彙力向上のための練習システム。

## 🎯 特徴

### 📚 語彙問題特化
- **R2連携**: Cloudflare R2に保存された語彙問題を自動取得
- **4択問題**: 単語の意味を4つの選択肢から選ぶ形式
- **レベル別**: Level 1〜4の段階的学習
- **フォールバック**: R2が利用できない場合の静的問題データ

### 🚀 機能
- **ランダム出題**: レベル別または全レベルからランダム出題
- **即座採点**: 解答後すぐに正解・不正解を表示
- **解説表示**: 各問題に解説を表示
- **学習統計**: 正答率・解答時間などの統計表示
- **セッション管理**: 複数問の連続学習セッション

## 🛠 技術仕様

### バックエンド
- **Node.js + Express**: API サーバー
- **Workers API Client**: R2データ取得
- **語彙問題専用最適化**: 選択肢ベースの解答検証

### フロントエンド
- **選択肢UI**: クリックして選択する直感的インターフェース
- **レスポンシブ**: PC・スマートフォン対応
- **視覚的フィードバック**: 正解・不正解の色分け表示

## 📖 使用方法

### 1. サーバー起動
```bash
npm install
npm start
# http://localhost:3000 でアクセス
```

### 2. 学習手順
1. **ユーザーID入力**: 学習者の識別
2. **レベル選択**: easy(Level 1) / medium(Level 2) / hard(Level 3,4)
3. **問題数設定**: 5問・10問・20問・30問から選択
4. **学習開始**: ランダム出題された語彙問題を解答
5. **結果確認**: セッション終了時に統計確認

### 3. 問題形式
```
「book」の意味として最も適切なものを選びなさい。

book

A. 本
B. 机  
C. 椅子
D. 鉛筆

正解: A. 本
解説: bookは「本、書物」という意味です
```

## 🗄 問題データ構造

### R2から取得される問題形式
```json
{
  "id": "vocab_lev1_1",
  "question": "bookの意味として最も適切なものを選びなさい",
  "word": "book",
  "choices": ["本", "机", "椅子", "鉛筆"],
  "correctAnswer": 0,
  "explanation": "bookは「本、書物」という意味です",
  "level": 1,
  "type": "vocabulary"
}
```

### API エンドポイント
- `GET /api/subjects` - 語彙問題統計取得
- `POST /api/session/start` - 学習セッション開始
- `GET /api/session/:id/question/:index` - 問題取得
- `POST /api/session/:id/answer/:index` - 解答送信・採点

## 🔄 R2連携

### 主要機能
1. **R2優先**: まずR2から最新の語彙問題を取得
2. **フォールバック**: R2接続失敗時は内蔵問題データを使用
3. **レベルフィルタ**: 指定レベルの問題のみ取得
4. **ログ表示**: 取得状況をコンソールで確認可能

### Workers API
- **エンドポイント**: `https://questa-r2-api.t88596565.workers.dev/api`
- **取得パス**: `/questions/english-vocab?level=lev1`
- **認証**: Bearer token方式

## 📊 学習データ

### 内蔵問題データ
- **Level 1**: book, apple, school など基本単語
- **Level 2**: important, difficult など中級単語
- **拡張性**: R2に追加問題をアップロードして自動反映

### 統計情報
- 総問題数・レベル別問題数
- 正答率・解答時間
- セッション履歴

## 🚀 今後の拡張

- **認証システム**: ユーザー管理・進捗保存
- **コメント機能**: 問題別コメント・ディスカッション
- **詳細分析**: 弱点分析・学習推奨
- **音声対応**: 発音問題・リスニング問題

---
**専用システム**: このシステムは英語語彙学習に特化して最適化されています。